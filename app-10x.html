<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Sales Tracker Pro - 10x Enhanced Version">
    <title>Sales Tracker Pro 10X - Ultimate Sales Gamification Platform</title>
    
    <!-- PWA Support -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0f172a">
    
    <!-- Icons & Fonts -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Chart.js & Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/confetti-js@0.0.18/dist/index.min.js"></script>
    
    <!-- Config -->
    <script src="config.js"></script>
    
    <style>
        :root {
            /* Enhanced Color System */
            --primary: #3b82f6;
            --primary-dark: #2563eb;
            --primary-light: #60a5fa;
            --secondary: #a855f7;
            --accent: #facc15;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            
            /* Glassmorphism */
            --glass: rgba(255, 255, 255, 0.05);
            --glass-hover: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.1);
            --backdrop: blur(20px);
            
            /* Dark Theme */
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --text-primary: rgba(255, 255, 255, 0.95);
            --text-secondary: rgba(255, 255, 255, 0.7);
            --text-muted: rgba(255, 255, 255, 0.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            inset: 0;
            z-index: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(168, 85, 247, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(250, 204, 21, 0.05) 0%, transparent 50%);
        }

        .particle {
            position: absolute;
            background: var(--primary);
            border-radius: 50%;
            opacity: 0.3;
            animation: float 20s infinite;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            33% { transform: translate(100px, -100px) scale(1.2); }
            66% { transform: translate(-100px, 100px) scale(0.8); }
        }

        /* Layout */
        .app-container {
            position: relative;
            z-index: 1;
            min-height: 100vh;
            display: flex;
        }

        /* Enhanced Sidebar */
        .sidebar {
            width: 280px;
            background: var(--glass);
            backdrop-filter: var(--backdrop);
            border-right: 1px solid var(--glass-border);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
        }

        .sidebar-header {
            padding: 2rem;
            border-bottom: 1px solid var(--glass-border);
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-menu {
            flex: 1;
            padding: 1rem;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            margin-bottom: 0.5rem;
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-item:hover {
            background: var(--glass-hover);
            transform: translateX(5px);
        }

        .nav-item.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.3);
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(255, 255, 255, 0.1) 100%);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            overflow-y: auto;
            padding: 2rem;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            background: var(--glass);
            backdrop-filter: var(--backdrop);
            padding: 1.5rem;
            border-radius: 1rem;
            border: 1px solid var(--glass-border);
        }

        .header-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        /* Enhanced Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--glass);
            backdrop-filter: var(--backdrop);
            border: 1px solid var(--glass-border);
            border-radius: 1rem;
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
        }

        .stat-icon {
            width: 3rem;
            height: 3rem;
            border-radius: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: baseline;
            gap: 0.5rem;
        }

        .stat-change {
            font-size: 0.875rem;
            padding: 0.25rem 0.75rem;
            border-radius: 999px;
            font-weight: 500;
        }

        .positive {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
        }

        .negative {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
        }

        /* Activity Feed */
        .activity-feed {
            background: var(--glass);
            backdrop-filter: var(--backdrop);
            border: 1px solid var(--glass-border);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .activity-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            margin-bottom: 0.75rem;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 0.75rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .activity-item:hover {
            background: var(--glass-hover);
            transform: scale(1.02);
        }

        .activity-icon {
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            flex-shrink: 0;
        }

        /* Buttons */
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 500;
            cursor: pointer;
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 30px rgba(59, 130, 246, 0.4);
        }

        .btn-glass {
            background: var(--glass);
            backdrop-filter: var(--backdrop);
            border: 1px solid var(--glass-border);
            color: var(--text-primary);
        }

        .btn-glass:hover {
            background: var(--glass-hover);
            border-color: var(--primary);
        }

        /* Achievement System */
        .achievement-popup {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 1.5rem 2rem;
            border-radius: 1rem;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Charts Container */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .chart-container {
            background: var(--glass);
            backdrop-filter: var(--backdrop);
            border: 1px solid var(--glass-border);
            border-radius: 1rem;
            padding: 1.5rem;
        }

        /* Leaderboard */
        .leaderboard {
            background: var(--glass);
            backdrop-filter: var(--backdrop);
            border: 1px solid var(--glass-border);
            border-radius: 1rem;
            padding: 1.5rem;
        }

        .leaderboard-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            margin-bottom: 0.75rem;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 0.75rem;
            transition: all 0.3s ease;
        }

        .leaderboard-item:hover {
            transform: translateX(10px);
            border-color: var(--primary);
        }

        .rank-badge {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1rem;
        }

        .rank-1 { background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); }
        .rank-2 { background: linear-gradient(135deg, #e5e7eb 0%, #9ca3af 100%); }
        .rank-3 { background: linear-gradient(135deg, #fb923c 0%, #ea580c 100%); }

        /* Modal */
        .modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--bg-secondary);
            border: 1px solid var(--glass-border);
            border-radius: 1rem;
            padding: 2rem;
            width: 90%;
            max-width: 500px;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .modal.active .modal-content {
            transform: scale(1);
        }

        /* Forms */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 0.5rem;
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        /* Mobile Responsive */
        .mobile-menu-btn {
            display: none;
            padding: 0.5rem;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 0.5rem;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                left: 0;
                top: 0;
                height: 100%;
                transform: translateX(-100%);
                z-index: 100;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .mobile-menu-btn {
                display: block;
            }

            .main-content {
                padding: 1rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .charts-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Loading States */
        .skeleton {
            background: linear-gradient(90deg, var(--glass) 25%, var(--glass-hover) 50%, var(--glass) 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Voice Input */
        .voice-btn {
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            background: var(--glass);
            border: 2px solid var(--glass-border);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .voice-btn:hover {
            background: var(--primary);
            transform: scale(1.1);
        }

        .voice-btn.recording {
            background: var(--danger);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
            70% { box-shadow: 0 0 0 20px rgba(239, 68, 68, 0); }
            100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }

        /* Notifications */
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 700;
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-animation">
        <div class="particle" style="width: 4px; height: 4px; top: 20%; left: 10%;"></div>
        <div class="particle" style="width: 6px; height: 6px; top: 80%; left: 90%;"></div>
        <div class="particle" style="width: 3px; height: 3px; top: 50%; left: 50%;"></div>
    </div>

    <!-- App Container -->
    <div class="app-container">
        <!-- Enhanced Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1 class="logo">
                    <i class="fas fa-rocket"></i>
                    Sales Tracker Pro
                </h1>
                <p style="color: var(--text-muted); font-size: 0.875rem;">10X Edition</p>
            </div>
            
            <nav class="nav-menu">
                <div class="nav-item active" data-page="dashboard">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </div>
                <div class="nav-item" data-page="activities">
                    <i class="fas fa-tasks"></i>
                    <span>Activities</span>
                    <span class="notification-badge">3</span>
                </div>
                <div class="nav-item" data-page="analytics">
                    <i class="fas fa-chart-line"></i>
                    <span>Analytics</span>
                </div>
                <div class="nav-item" data-page="leaderboard">
                    <i class="fas fa-trophy"></i>
                    <span>Leaderboard</span>
                </div>
                <div class="nav-item" data-page="achievements">
                    <i class="fas fa-medal"></i>
                    <span>Achievements</span>
                </div>
                <div class="nav-item" data-page="team">
                    <i class="fas fa-users"></i>
                    <span>Team</span>
                </div>
                <div class="nav-item" data-page="goals">
                    <i class="fas fa-bullseye"></i>
                    <span>Goals</span>
                </div>
                <div class="nav-item" data-page="reports">
                    <i class="fas fa-file-chart-line"></i>
                    <span>Reports</span>
                </div>
            </nav>
            
            <div style="padding: 1rem; border-top: 1px solid var(--glass-border);">
                <div class="nav-item" data-page="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <button class="mobile-menu-btn" onclick="toggleSidebar()">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h2 id="page-title">Dashboard</h2>
                </div>
                
                <div class="header-actions">
                    <div class="voice-btn" onclick="toggleVoiceInput()" title="Voice Input">
                        <i class="fas fa-microphone"></i>
                    </div>
                    
                    <button class="btn btn-glass" onclick="showNotifications()">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">5</span>
                    </button>
                    
                    <button class="btn btn-primary" onclick="showQuickAdd()">
                        <i class="fas fa-plus"></i>
                        Quick Add
                    </button>
                    
                    <div style="display: flex; align-items: center; gap: 0.75rem; padding: 0.5rem 1rem; background: var(--glass); border-radius: 0.5rem; border: 1px solid var(--glass-border);">
                        <img src="https://ui-avatars.com/api/?name=John+Doe&background=3b82f6&color=fff" alt="Profile" style="width: 2rem; height: 2rem; border-radius: 50%;">
                        <div>
                            <div style="font-weight: 500; font-size: 0.875rem;">John Doe</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">Level 15</div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Dashboard Content -->
            <div id="dashboard-content">
                <!-- Enhanced Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);">
                            <i class="fas fa-coins"></i>
                        </div>
                        <div class="stat-value">
                            12,345
                            <span class="stat-change positive">+23.5%</span>
                        </div>
                        <div style="color: var(--text-secondary);">Total Points</div>
                        <div style="margin-top: 1rem;">
                            <div style="height: 4px; background: var(--glass); border-radius: 2px; overflow: hidden;">
                                <div style="height: 100%; width: 75%; background: linear-gradient(90deg, #fbbf24 0%, #f59e0b 100%);"></div>
                            </div>
                            <div style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.5rem;">75% to next level</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);">
                            <i class="fas fa-fire"></i>
                        </div>
                        <div class="stat-value">
                            28 days
                            <span class="stat-change positive">+7</span>
                        </div>
                        <div style="color: var(--text-secondary);">Current Streak</div>
                        <div style="margin-top: 1rem; display: flex; gap: 0.25rem;">
                            <div style="width: 8px; height: 8px; border-radius: 50%; background: var(--success);"></div>
                            <div style="width: 8px; height: 8px; border-radius: 50%; background: var(--success);"></div>
                            <div style="width: 8px; height: 8px; border-radius: 50%; background: var(--success);"></div>
                            <div style="width: 8px; height: 8px; border-radius: 50%; background: var(--success);"></div>
                            <div style="width: 8px; height: 8px; border-radius: 50%; background: var(--success);"></div>
                            <div style="width: 8px; height: 8px; border-radius: 50%; background: var(--success);"></div>
                            <div style="width: 8px; height: 8px; border-radius: 50%; background: var(--success);"></div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #a855f7 0%, #9333ea 100%);">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div class="stat-value">
                            #3
                            <span class="stat-change positive">↑2</span>
                        </div>
                        <div style="color: var(--text-secondary);">Team Rank</div>
                        <div style="margin-top: 1rem; font-size: 0.875rem; color: var(--text-muted);">
                            Top 5% this month
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <div class="stat-value">
                            94%
                            <span class="stat-change positive">+12%</span>
                        </div>
                        <div style="color: var(--text-secondary);">Completion Rate</div>
                        <div style="margin-top: 1rem;">
                            <canvas id="miniChart" width="100" height="40"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Activity Feed & Charts -->
                <div class="charts-grid">
                    <div class="chart-container">
                        <h3 style="margin-bottom: 1rem;">Performance Trend</h3>
                        <canvas id="performanceChart"></canvas>
                    </div>
                    
                    <div class="chart-container">
                        <h3 style="margin-bottom: 1rem;">Activity Distribution</h3>
                        <canvas id="activityChart"></canvas>
                    </div>
                </div>

                <!-- Recent Activities -->
                <div class="activity-feed">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h3>Recent Activities</h3>
                        <button class="btn btn-glass" onclick="showAllActivities()">
                            View All
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                    
                    <div id="activities-list">
                        <!-- Activities will be loaded here -->
                    </div>
                </div>

                <!-- Team Leaderboard -->
                <div class="leaderboard">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h3>Team Leaderboard</h3>
                        <select class="form-input" style="width: auto; padding: 0.5rem 1rem;">
                            <option>This Week</option>
                            <option>This Month</option>
                            <option>All Time</option>
                        </select>
                    </div>
                    
                    <div id="leaderboard-list">
                        <!-- Leaderboard will be loaded here -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Quick Add Modal -->
    <div class="modal" id="quickAddModal">
        <div class="modal-content">
            <h2 style="margin-bottom: 1.5rem;">Quick Add Activity</h2>
            
            <div class="form-group">
                <label class="form-label">Activity Type</label>
                <select class="form-input" id="activityType">
                    <option value="call">📞 Phone Call (20 pts)</option>
                    <option value="email">📧 Email (10 pts)</option>
                    <option value="meeting">🤝 Meeting (50 pts)</option>
                    <option value="proposal">📄 Proposal (30 pts)</option>
                    <option value="demo">🎯 Demo (40 pts)</option>
                    <option value="followup">🔄 Follow-up (15 pts)</option>
                    <option value="research">🔍 Research (25 pts)</option>
                    <option value="deal">💰 Deal Closed (100 pts)</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="form-label">Description</label>
                <input type="text" class="form-input" id="activityDescription" placeholder="What did you accomplish?">
            </div>
            
            <div class="form-group">
                <label class="form-label">Client/Project</label>
                <input type="text" class="form-input" id="activityClient" placeholder="Client or project name">
            </div>
            
            <div class="form-group">
                <label class="form-label">Tags</label>
                <input type="text" class="form-input" id="activityTags" placeholder="Add tags (comma separated)">
                <div style="margin-top: 0.5rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
                    <span class="btn btn-glass" style="padding: 0.25rem 0.75rem; font-size: 0.875rem;" onclick="addTag('urgent')">urgent</span>
                    <span class="btn btn-glass" style="padding: 0.25rem 0.75rem; font-size: 0.875rem;" onclick="addTag('high-value')">high-value</span>
                    <span class="btn btn-glass" style="padding: 0.25rem 0.75rem; font-size: 0.875rem;" onclick="addTag('follow-up')">follow-up</span>
                </div>
            </div>
            
            <div style="display: flex; gap: 1rem;">
                <button class="btn btn-primary" style="flex: 1;" onclick="submitActivity()">
                    <i class="fas fa-check"></i>
                    Add Activity
                </button>
                <button class="btn btn-glass" style="flex: 1;" onclick="closeModal('quickAddModal')">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <script>
        // Enhanced App State
        const app = {
            user: null,
            activities: [],
            leaderboard: [],
            achievements: [],
            notifications: [],
            streak: 0,
            level: 1,
            isVoiceActive: false,
            recognition: null,
            charts: {}
        };

        // API Configuration
        const API_BASE_URL = window.CONFIG?.apiBaseUrl || 'http://localhost:10000/api';

        // Initialize App
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('🚀 Sales Tracker Pro 10X - Initializing...');
            
            // Initialize features
            initializeNavigation();
            initializeCharts();
            initializeVoiceRecognition();
            initializeNotifications();
            initializeOfflineSupport();
            
            // Load data
            await loadUserData();
            await loadActivities();
            await loadLeaderboard();
            
            // Start real-time updates
            startRealTimeSync();
            
            // Check achievements
            checkAchievements();
        });

        // Navigation
        function initializeNavigation() {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', () => {
                    const page = item.dataset.page;
                    if (page) {
                        switchPage(page);
                        
                        // Update active state
                        document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                        item.classList.add('active');
                    }
                });
            });
        }

        function switchPage(page) {
            document.getElementById('page-title').textContent = 
                page.charAt(0).toUpperCase() + page.slice(1);
            
            // Here you would load different page content
            console.log(`Switching to ${page} page`);
        }

        // Initialize Charts
        function initializeCharts() {
            // Performance Chart
            const performanceCtx = document.getElementById('performanceChart').getContext('2d');
            app.charts.performance = new Chart(performanceCtx, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Points Earned',
                        data: [120, 190, 300, 250, 420, 380, 450],
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: { 
                            beginAtZero: true,
                            grid: { color: 'rgba(255, 255, 255, 0.05)' }
                        },
                        x: {
                            grid: { display: false }
                        }
                    }
                }
            });

            // Activity Distribution Chart
            const activityCtx = document.getElementById('activityChart').getContext('2d');
            app.charts.activity = new Chart(activityCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Meetings', 'Calls', 'Emails', 'Proposals', 'Deals'],
                    datasets: [{
                        data: [30, 25, 20, 15, 10],
                        backgroundColor: [
                            '#3b82f6',
                            '#a855f7',
                            '#facc15',
                            '#10b981',
                            '#ef4444'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { color: 'rgba(255, 255, 255, 0.7)' }
                        }
                    }
                }
            });

            // Mini Chart
            const miniCtx = document.getElementById('miniChart').getContext('2d');
            new Chart(miniCtx, {
                type: 'line',
                data: {
                    labels: ['1', '2', '3', '4', '5'],
                    datasets: [{
                        data: [85, 88, 90, 92, 94],
                        borderColor: '#10b981',
                        borderWidth: 2,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { display: false },
                        y: { display: false }
                    }
                }
            });
        }

        // Voice Recognition
        function initializeVoiceRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                app.recognition = new SpeechRecognition();
                app.recognition.continuous = false;
                app.recognition.lang = 'en-US';
                
                app.recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript;
                    handleVoiceCommand(transcript);
                };
                
                app.recognition.onerror = (event) => {
                    console.error('Voice recognition error:', event.error);
                    document.querySelector('.voice-btn').classList.remove('recording');
                };
            }
        }

        function toggleVoiceInput() {
            const voiceBtn = document.querySelector('.voice-btn');
            
            if (app.isVoiceActive) {
                app.recognition.stop();
                voiceBtn.classList.remove('recording');
                app.isVoiceActive = false;
            } else {
                app.recognition.start();
                voiceBtn.classList.add('recording');
                app.isVoiceActive = true;
            }
        }

        function handleVoiceCommand(command) {
            console.log('Voice command:', command);
            const lower = command.toLowerCase();
            
            if (lower.includes('add') && lower.includes('activity')) {
                showQuickAdd();
            } else if (lower.includes('show') && lower.includes('leaderboard')) {
                switchPage('leaderboard');
            } else if (lower.includes('meeting with')) {
                const client = command.match(/meeting with (.+)/i)?.[1];
                document.getElementById('activityType').value = 'meeting';
                document.getElementById('activityDescription').value = `Meeting with ${client}`;
                showQuickAdd();
            }
            
            document.querySelector('.voice-btn').classList.remove('recording');
            app.isVoiceActive = false;
        }

        // Notifications
        function initializeNotifications() {
            if ('Notification' in window && Notification.permission === 'default') {
                Notification.requestPermission();
            }
        }

        function showNotification(title, body, icon = '🎯') {
            if ('Notification' in window && Notification.permission === 'granted') {
                new Notification(title, {
                    body,
                    icon: `data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">${icon}</text></svg>`
                });
            }
        }

        // Offline Support
        function initializeOfflineSupport() {
            window.addEventListener('online', () => {
                console.log('Back online - syncing data...');
                syncOfflineData();
            });
            
            window.addEventListener('offline', () => {
                console.log('Gone offline - using local storage');
                showNotification('Offline Mode', 'Your data will be synced when connection is restored', '📶');
            });
        }

        // Load User Data
        async function loadUserData() {
            try {
                const response = await fetch(`${API_BASE_URL}/user`, {
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('token')}`
                    }
                });
                
                if (response.ok) {
                    app.user = await response.json();
                } else {
                    // Demo login
                    await demoLogin();
                }
            } catch (error) {
                console.error('Error loading user data:', error);
                await demoLogin();
            }
        }

        async function demoLogin() {
            try {
                const response = await fetch(`${API_BASE_URL}/demo/login`, {
                    method: 'POST'
                });
                
                if (response.ok) {
                    const data = await response.json();
                    app.user = data.user;
                    localStorage.setItem('token', data.token);
                }
            } catch (error) {
                console.error('Demo login error:', error);
                // Use fallback data
                app.user = {
                    id: 'demo',
                    displayName: 'John Doe',
                    totalPoints: 12345,
                    currentStreak: 28,
                    level: 15
                };
            }
        }

        // Load Activities
        async function loadActivities() {
            try {
                const response = await fetch(`${API_BASE_URL}/activities`, {
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('token')}`
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    app.activities = data.activities || [];
                    displayActivities();
                }
            } catch (error) {
                console.error('Error loading activities:', error);
                // Use demo data
                app.activities = [
                    { id: 1, type: 'meeting', description: 'Strategy meeting with Tesla team', points: 50, createdAt: new Date(Date.now() - 2 * 60 * 60 * 1000), client: 'Tesla', tags: ['high-value'] },
                    { id: 2, type: 'proposal', description: 'Sent Q4 proposal to Microsoft', points: 30, createdAt: new Date(Date.now() - 4 * 60 * 60 * 1000), client: 'Microsoft', tags: ['urgent'] },
                    { id: 3, type: 'call', description: 'Follow-up call with Apple', points: 20, createdAt: new Date(Date.now() - 6 * 60 * 60 * 1000), client: 'Apple', tags: ['follow-up'] }
                ];
                displayActivities();
            }
        }

        // Display Activities
        function displayActivities() {
            const container = document.getElementById('activities-list');
            container.innerHTML = '';
            
            app.activities.slice(0, 5).forEach(activity => {
                const item = document.createElement('div');
                item.className = 'activity-item';
                item.innerHTML = `
                    <div class="activity-icon" style="background: ${getActivityColor(activity.type)};">
                        ${getActivityIcon(activity.type)}
                    </div>
                    <div style="flex: 1;">
                        <div style="font-weight: 500;">${activity.description}</div>
                        <div style="font-size: 0.875rem; color: var(--text-muted);">
                            ${activity.client || ''} • ${getTimeAgo(new Date(activity.createdAt))}
                        </div>
                        ${activity.tags ? `
                            <div style="margin-top: 0.25rem; display: flex; gap: 0.25rem;">
                                ${activity.tags.map(tag => `
                                    <span style="font-size: 0.75rem; padding: 0.125rem 0.5rem; background: var(--glass); border-radius: 999px;">
                                        ${tag}
                                    </span>
                                `).join('')}
                            </div>
                        ` : ''}
                    </div>
                    <div style="text-align: right;">
                        <div style="font-weight: 600; color: var(--primary);">+${activity.points}</div>
                        <div style="font-size: 0.75rem; color: var(--text-muted);">points</div>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        // Load Leaderboard
        async function loadLeaderboard() {
            try {
                const response = await fetch(`${API_BASE_URL}/leaderboard/weekly`);
                
                if (response.ok) {
                    const data = await response.json();
                    app.leaderboard = data.leaderboard || [];
                    displayLeaderboard();
                }
            } catch (error) {
                console.error('Error loading leaderboard:', error);
                // Use demo data
                app.leaderboard = [
                    { rank: 1, displayName: 'Sarah Chen', totalPoints: 15420, avatar: 'SC', trend: 'up' },
                    { rank: 2, displayName: 'Mike Johnson', totalPoints: 14890, avatar: 'MJ', trend: 'up' },
                    { rank: 3, displayName: 'John Doe', totalPoints: 12345, avatar: 'JD', trend: 'same' },
                    { rank: 4, displayName: 'Emily Davis', totalPoints: 11200, avatar: 'ED', trend: 'down' },
                    { rank: 5, displayName: 'Alex Kim', totalPoints: 10500, avatar: 'AK', trend: 'up' }
                ];
                displayLeaderboard();
            }
        }

        // Display Leaderboard
        function displayLeaderboard() {
            const container = document.getElementById('leaderboard-list');
            container.innerHTML = '';
            
            app.leaderboard.forEach((user, index) => {
                const item = document.createElement('div');
                item.className = 'leaderboard-item';
                item.innerHTML = `
                    <div class="rank-badge rank-${user.rank}">${user.rank}</div>
                    <img src="https://ui-avatars.com/api/?name=${encodeURIComponent(user.displayName)}&background=3b82f6&color=fff" 
                         alt="${user.displayName}" 
                         style="width: 2.5rem; height: 2.5rem; border-radius: 50%;">
                    <div style="flex: 1;">
                        <div style="font-weight: 500;">${user.displayName}</div>
                        <div style="font-size: 0.875rem; color: var(--text-muted);">
                            ${user.totalPoints.toLocaleString()} points
                        </div>
                    </div>
                    <div style="font-size: 1.25rem;">
                        ${user.trend === 'up' ? '📈' : user.trend === 'down' ? '📉' : '➡️'}
                    </div>
                `;
                container.appendChild(item);
            });
        }

        // Quick Add
        function showQuickAdd() {
            document.getElementById('quickAddModal').classList.add('active');
            document.getElementById('activityDescription').focus();
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        async function submitActivity() {
            const type = document.getElementById('activityType').value;
            const description = document.getElementById('activityDescription').value;
            const client = document.getElementById('activityClient').value;
            const tags = document.getElementById('activityTags').value.split(',').map(t => t.trim()).filter(t => t);
            
            if (!description) {
                alert('Please enter a description');
                return;
            }
            
            try {
                const response = await fetch(`${API_BASE_URL}/activities`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${localStorage.getItem('token')}`
                    },
                    body: JSON.stringify({
                        type,
                        description,
                        client,
                        tags,
                        date: new Date().toISOString()
                    })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    
                    // Add to local state
                    app.activities.unshift(data.activity);
                    
                    // Update displays
                    displayActivities();
                    updateStats();
                    
                    // Show achievement
                    showAchievement('Activity Added!', `+${data.activity.points} points`);
                    
                    // Close modal
                    closeModal('quickAddModal');
                    
                    // Clear form
                    document.getElementById('activityDescription').value = '';
                    document.getElementById('activityClient').value = '';
                    document.getElementById('activityTags').value = '';
                }
            } catch (error) {
                console.error('Error adding activity:', error);
                // Save offline
                saveOfflineActivity({ type, description, client, tags });
                showAchievement('Saved Offline', 'Will sync when online');
                closeModal('quickAddModal');
            }
        }

        // Achievements
        function checkAchievements() {
            // Check for streak achievement
            if (app.user?.currentStreak === 7) {
                showAchievement('Week Warrior! 🔥', '7 day streak achieved');
            } else if (app.user?.currentStreak === 30) {
                showAchievement('Unstoppable! 💪', '30 day streak achieved');
            }
            
            // Check for points milestone
            const points = app.user?.totalPoints || 0;
            if (points > 10000 && points <= 10100) {
                showAchievement('10K Club! 🎯', 'You\'ve earned 10,000 points');
            }
        }

        function showAchievement(title, description) {
            const popup = document.createElement('div');
            popup.className = 'achievement-popup';
            popup.innerHTML = `
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <div style="font-size: 2rem;">🏆</div>
                    <div>
                        <div style="font-weight: 600; font-size: 1.125rem;">${title}</div>
                        <div style="font-size: 0.875rem; opacity: 0.9;">${description}</div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(popup);
            
            // Trigger confetti
            if (window.ConfettiGenerator) {
                const confetti = new ConfettiGenerator({ target: 'confetti-canvas' });
                confetti.render();
                setTimeout(() => confetti.clear(), 5000);
            }
            
            // Remove after 5 seconds
            setTimeout(() => {
                popup.style.animation = 'slideOut 0.5s ease-out';
                setTimeout(() => popup.remove(), 500);
            }, 5000);
            
            // Show browser notification
            showNotification(title, description, '🏆');
        }

        // Real-time Sync
        function startRealTimeSync() {
            // Sync every 30 seconds
            setInterval(() => {
                if (navigator.onLine) {
                    syncData();
                }
            }, 30000);
        }

        async function syncData() {
            // Sync offline activities
            const offlineActivities = getOfflineActivities();
            for (const activity of offlineActivities) {
                try {
                    await submitOfflineActivity(activity);
                } catch (error) {
                    console.error('Error syncing activity:', error);
                }
            }
            
            // Reload fresh data
            await loadActivities();
            await loadLeaderboard();
        }

        // Utility Functions
        function getActivityIcon(type) {
            const icons = {
                call: '📞',
                email: '📧',
                meeting: '🤝',
                proposal: '📄',
                demo: '🎯',
                followup: '🔄',
                research: '🔍',
                deal: '💰'
            };
            return icons[type] || '📌';
        }

        function getActivityColor(type) {
            const colors = {
                call: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',
                email: 'linear-gradient(135deg, #a855f7 0%, #9333ea 100%)',
                meeting: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
                proposal: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',
                demo: 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)',
                deal: 'linear-gradient(135deg, #facc15 0%, #eab308 100%)'
            };
            return colors[type] || 'linear-gradient(135deg, #6b7280 0%, #4b5563 100%)';
        }

        function getTimeAgo(date) {
            const now = new Date();
            const diff = now - date;
            const minutes = Math.floor(diff / 60000);
            const hours = Math.floor(minutes / 60);
            const days = Math.floor(hours / 24);
            
            if (days > 0) return `${days}d ago`;
            if (hours > 0) return `${hours}h ago`;
            if (minutes > 0) return `${minutes}m ago`;
            return 'Just now';
        }

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
        }

        function addTag(tag) {
            const input = document.getElementById('activityTags');
            const currentTags = input.value.split(',').map(t => t.trim()).filter(t => t);
            if (!currentTags.includes(tag)) {
                currentTags.push(tag);
                input.value = currentTags.join(', ');
            }
        }

        function updateStats() {
            // Update point display
            const pointElements = document.querySelectorAll('.stat-value');
            if (pointElements[0] && app.user) {
                pointElements[0].innerHTML = `
                    ${app.user.totalPoints.toLocaleString()}
                    <span class="stat-change positive">+${app.activities[0]?.points || 0}</span>
                `;
            }
        }

        // Offline Support Functions
        function saveOfflineActivity(activity) {
            const offline = JSON.parse(localStorage.getItem('offlineActivities') || '[]');
            offline.push({ ...activity, id: Date.now(), synced: false });
            localStorage.setItem('offlineActivities', JSON.stringify(offline));
        }

        function getOfflineActivities() {
            return JSON.parse(localStorage.getItem('offlineActivities') || '[]').filter(a => !a.synced);
        }

        async function submitOfflineActivity(activity) {
            // Submit to server
            const response = await fetch(`${API_BASE_URL}/activities`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${localStorage.getItem('token')}`
                },
                body: JSON.stringify(activity)
            });
            
            if (response.ok) {
                // Mark as synced
                const offline = JSON.parse(localStorage.getItem('offlineActivities') || '[]');
                const index = offline.findIndex(a => a.id === activity.id);
                if (index >= 0) {
                    offline[index].synced = true;
                    localStorage.setItem('offlineActivities', JSON.stringify(offline));
                }
            }
        }

        function showNotifications() {
            // Show notifications panel
            console.log('Showing notifications...');
        }

        function showAllActivities() {
            switchPage('activities');
        }

        // Keyboard Shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.metaKey || e.ctrlKey) {
                if (e.key === 'k') {
                    e.preventDefault();
                    showQuickAdd();
                } else if (e.key === '/') {
                    e.preventDefault();
                    toggleVoiceInput();
                }
            }
        });

        @keyframes slideOut {
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }
    </script>

    <!-- Confetti Canvas -->
    <canvas id="confetti-canvas" style="position: fixed; inset: 0; pointer-events: none; z-index: 3000;"></canvas>
</body>
</html>